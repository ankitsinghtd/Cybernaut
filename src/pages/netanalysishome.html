<!DOCTYPE html>
<html>

<head>
    <title>Network Analysis</title>
    <link rel="stylesheet" href="/src/styles/netanalysishome.css">
</head>

<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <img src="/src/images/spyder.png" alt="Cybernaut Logo" height="100" width="100">
                <h1>Cybernaut</h1>
            </div>
            <div class="right-section">
                <a href="/index.html" class="menu-buttons">Home</a>
                <div class="dropdown">
                    <button class="menu-buttons">Tools &#9662;</button>
                    <div class="dropdown-content">
                        <a href="/src/pages/netanalysishome.html">Network Analysis</a>
                        <a href="/src/pages/webstructure.html">Website Structure</a>
                        <a href="/src/pages/filescan.html">Scan a File</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="menu-buttons">Services &#9662;</button>
                    <div class="dropdown-content">
                        <a href="/src/pages/article.html">Articles</a>
                        <a href="/src/pages/article.html">Blog</a>
                        <a href="/src/pages/news.html">News</a>
                    </div>
                </div>
                <a href="/index.html" class="menu-buttons">Contact Us</a>
                <button id="theme-toggle">Dark/Light</button>
            </div>
        </div>
        <div class="NetworkHeader">
            <h1>Network Analysis</h1>
        </div>
    </header>
    <script src="src/scripts/theme.js"></script>
    <main>
        <div class="introduction">
            <p>Welcome to Cybernaut's Network Analysis tool. Here's something to get you started:</p>
        </div>

        <div class="description">
            <div class="card">
                <h2 class="card-title">What It Does</h2>
                <p class="card-text">Our Network Analysis tool allows you to analyze and assess the performance,
                    security, and structure of a website. Simply enter the URL of the website you want to scan, and
                    we'll provide you with a detailed report.</p>
            </div>
            <div class="card">
                <h2 class="card-title">How the Report Is Generated</h2>
                <p class="card-text">After you initiate a scan, our tool will analyze various aspects of the website,
                    including its load time, security vulnerabilities, and network structure. The results will be
                    compiled into a comprehensive report, giving you insights into the website's performance and
                    potential issues.</p>
            </div>
        </div>
        <div class="get-started-button">
            <a href="#urltoscan" class="cta-button">Get Started</a>
        </div>
        <div class="search-container">
            <input type="text" id="urltoscan" placeholder="Enter a URL">
            <a href="#" class="scan-button" id="scan-button"><b>Scan URL</b></a>
        </div>
    </main>
    <main>
        <div class="table" style="display: none;">
            <h2>DNS Records</h2>
            <table id="dnsTable">
                <!-- ... Table structure ... -->
            </table>
            <script>
                const jsonData = {
                    "data": {
                        "attributes": {
                            // ... your JSON data ...
                        }
                    }
                };

                // Function to populate the DNS records table
                function populateDnsTable(data) {
                    const dnsTable = document.getElementById('dnsTable');
                    const tbody = dnsTable.getElementsByTagName('tbody')[0];

                    for (const record of data.attributes.last_dns_records) {
                        const row = tbody.insertRow();
                        const typeCell = row.insertCell(0);
                        const valueCell = row.insertCell(1);
                        const ttlCell = row.insertCell(2);

                        typeCell.textContent = record.type;
                        valueCell.textContent = record.value;
                        ttlCell.textContent = record.ttl;
                    }
                }
            </script>
        </div>

        <!-- Popularity Chart (initially hidden) -->
        <div class="chart" style="display: none;">
            <h2>Popularity Ranks</h2>
            <canvas id="popularityChart" width="400" height="400"></canvas>
            <script>
                // HTML: <canvas id="myPieChart" width="400" height="400"></canvas>

                // JavaScript:
                const ctx = document.getElementById('myPieChart').getContext('2d');
                const data = {
                    labels: ['Harmless', 'Malicious', 'Suspicious', 'Undetected', 'Timeout'],
                    datasets: [{
                        data: [72, 0, 0, 16, 0],
                        backgroundColor: ['green', 'red', 'orange', 'gray', 'yellow'],
                    }],
                };

                new Chart(ctx, {
                    type: 'pie',
                    data: data,
                });

            </script>
        </div>
        <script>
            document.getElementById('scan-button').addEventListener('click', function () {
                // Replace 'scanButton' with the actual ID of your scan button

                // Fetch and process JSON data (as shown in previous response)

                // Once you have the data and have populated the tables and charts, show them:
                const dnsTableDiv = document.querySelector('.table');
                const chartDiv = document.querySelector('.chart');

                dnsTableDiv.style.display = 'block'; // Show DNS table
                chartDiv.style.display = 'block';     // Show chart

                // Change button text and add functionality to return to the initial page
                this.textContent = 'Scan Another'; // Change button text

                // Add event listener for "Scan Another" button
                this.removeEventListener('click', arguments.callee); // Remove previous click listener
                this.addEventListener('click', function () {
                    // Clear the tables and charts
                    dnsTableDiv.style.display = 'none'; // Hide DNS table
                    chartDiv.style.display = 'none';     // Hide chart

                    // Change button text back to "Scan URL"
                    this.textContent = 'Scan URL';

                    // Re-add the event listener to initiate a new scan
                    this.removeEventListener('click', arguments.callee); // Remove previous click listener
                    this.addEventListener('click', function () {
                        // Trigger a new scan or navigate to the initial page as needed
                        // ...
                    });
                });
            });


        </script>
    </main>
    <footer>
    </footer>
</body>

</html>